import { rapidapiClient } from '../rapidapiClient.js';import { config } from '../config.js';/** * Fetches the first page of employees for a company name, * then filters by any of the provided job title keywords. * Uses the "Get Company People" endpoint GET /api/v1/company/people?company=<name>&page=1 :contentReference[oaicite:0]{index=0} */export async function findEmployeesByTitles(companyName, titles) {  // 1) fetch all people on first page  const resp = await rapidapiClient.get('/api/v1/company/people', {    params: { company: companyName, page: 1 },  });  const people = resp.data.data || [];  // 2) filter by title keywords (case‐insensitive substring match)  const filtered = people.filter((p) => {    if (!p.title) return false;    const ttl = p.title.toLowerCase();    return titles.some((kw) => ttl.includes(kw.toLowerCase()));  });  // 3) map to desired shape and take top N  return filtered.slice(0, config.maxResults).map((p) => ({    name: p.full_name,    jobTitle: p.title,    linkedinProfileUrl: p.url,  }));}