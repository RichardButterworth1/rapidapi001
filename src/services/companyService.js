// src/services/searchService.jsimport { rapidapiClient } from '../rapidapiClient.js';import { config } from '../config.js';/** * Search LinkedIn users by job title + company keywords, * filter by exact company name, dedupe, and return up to maxResults. */export async function findEmployeesByTitles(orgName, titles) {  const normalizedOrg = orgName.toLowerCase();  const seen = new Set();  const results = [];  for (const title of titles) {    // 1) call the user search endpoint    let users;    try {      const resp = await rapidapiClient.get('/api/v1/user/search', {        params: {          keywords: `${title} ${orgName}`,          page: 1,        },      });      users = resp.data.data || [];    } catch (err) {      console.error('User search error for', title, err.response?.status, err.response?.data || err.message);      continue; // skip this title    }    // 2) filter by exact or substring match on company    for (const u of users) {      if (results.length >= config.maxResults) break;      const userCompany = (u.company || '').toLowerCase();      if (!userCompany.includes(normalizedOrg)) continue;      const profileUrl = u.url;      if (seen.has(profileUrl)) continue;      seen.add(profileUrl);      results.push({        name: u.full_name,        jobTitle: u.title || u.occupation || '(title unavailable)',        linkedinProfileUrl: profileUrl,      });    }    if (results.length >= config.maxResults) break;  }  return results;}